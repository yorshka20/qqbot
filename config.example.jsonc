{
  // Protocol configurations
  "protocols": [
    {
      // Milky protocol (primary)
      "name": "milky",
      "enabled": true,
      "priority": 1,
      "connection": {
        "url": "ws://192.168.50.97:3010/event",
        "apiUrl": "http://192.168.50.97:3010/api",
        "accessToken": "your_access_token_here",
      },
      "reconnect": {
        "enabled": true,
        "maxRetries": 10,
        "backoff": "exponential",
        "initialDelay": 1000,
        "maxDelay": 30000,
      },
    },
    {
      // OneBot11 protocol (fallback)
      "name": "onebot11",
      "enabled": true,
      "priority": 2,
      "connection": {
        "url": "ws://192.168.50.97:3001/event",
        "apiUrl": "http://192.168.50.97:3001/api",
        "accessToken": "your_access_token_here",
      },
      "reconnect": {
        "enabled": true,
        "maxRetries": 10,
        "backoff": "exponential",
        "initialDelay": 1000,
        "maxDelay": 30000,
      },
    },
  ],
  // API configuration
  "api": {
    "strategy": "priority",
    "preferredProtocol": "milky",
  },
  // Event deduplication configuration
  "events": {
    "deduplication": {
      "enabled": true,
      "strategy": "first-received",
      "window": 5000,
    },
  },
  // Bot configuration
  "bot": {
    "selfId": null,
    // Bot owner: highest permission level, can use all commands
    "owner": "123123",
    // Bot admins: user IDs that have admin permission level
    // These users can adjust bot behavior and trigger special commands
    "admins": [
      "123123",
      "123123"
    ]
  },
  // Static file server configuration (optional)
  "staticServer": {
    "port": 8888,
    "host": "192.168.50.173",
    "root": "./output"
  },
  // Plugin configuration
  // Plugins must be placed in src/plugins/ directory
  "plugins": {
    "list": [
      // Example: Whitelist plugin
      // {
      //   "name": "whitelist",
      //   "enabled": true,
      //   "config": {
      //     "enabled": true,
      //     "userIds": ["123456789", "987654321"]
      //   }
      // },
      // Message Operation Plugin - handles reactions on messages
      {
        "name": "messageOperation",
        "enabled": true,
        "config": {
          "enabled": true,
          // Map of reaction ID to operation
          // When someone reacts with reaction ID "38" to bot's message, recall the message
          "reactionOperations": {
            "38": "recall"
          }
        }
      },
      // Nudge Plugin - automatically replies with bot status when bot is nudged (戳一戳)
      {
        "name": "nudge",
        "enabled": true
      }
    ],
  },
  // Database configuration (required)
  // Choose one database type: "sqlite" or "mongodb"
  "database": {
    // SQLite configuration (simple, file-based database)
    "type": "sqlite",
    "sqlite": {
      // Path to SQLite database file (relative to project root or absolute path)
      "path": "data/bot.db"
    },
    // MongoDB configuration (alternative, for production use)
    // "type": "mongodb",
    // "mongodb": {
    //   "connectionString": "mongodb://localhost:27017",
    //   "database": "qqbot",
    //   "options": {
    //     "authSource": "admin",
    //     "user": "your_username",
    //     "password": "your_password"
    //   }
    // }
  },
  // AI configuration (optional)
  // If not configured, AI capabilities will not be available
  "ai": {
    // Default providers by capability (optional)
    "defaultProviders": {
      "llm": "ollama", // Default LLM provider
      "text2img": "local-text2img" // t2i command defaults to local-text2img
    },
    // AI providers configuration
    "providers": {
      // Ollama provider example
      "ollama": {
        "type": "ollama",
        "baseUrl": "http://localhost:11434",
        "model": "llama2",
        "temperature": 0.7
      },
      // OpenAI provider example
      // "openai": {
      //   "type": "openai",
      //   "apiKey": "sk-...",
      //   "model": "gpt-3.5-turbo",
      //   "baseURL": "https://api.openai.com/v1",
      //   "temperature": 0.7,
      //   "maxTokens": 2000
      // },
      // Local Text2Image provider example (connects to local Python server)
      // "local-text2img": {
      //   "type": "local-text2img",
      //   "baseUrl": "http://localhost:8000",
      //   "endpoint": "/generate",
      //   "timeout": 300000,
      //   "censorEnabled": true,
      //   // Default values (used when options are not provided)
      //   "defaultSteps": 25,
      //   "defaultWidth": 1024,
      //   "defaultHeight": 1024,
      //   "defaultGuidanceScale": 5,
      //   "defaultNumImages": 1,
      // },
      // NovelAI provider for image generation
      // Note: Image generation uses image.novelai.net (api.novelai.net was deprecated on 2024-04-05)
      "novelai": {
        "type": "novelai",
        "accessToken": "your_novelai_access_token_here",
        "baseURL": "https://image.novelai.net",
        "model": "nai-diffusion-4-5-full", // Options: "nai-diffusion-4-5-curated", "nai-diffusion-4-5-full", "nai-diffusion-3"
        "defaultSteps": 45,
        "defaultWidth": 832,
        "defaultHeight": 1216,
        "defaultGuidanceScale": 5.0
      },
      // Gemini provider for text-to-image generation
      // Uses Google Gemini API (nano banana) for image generation
      // "gemini": {
      //   "type": "gemini",
      //   "apiKey": "your_gemini_api_key_here",
      //   "model": "gemini-2.5-flash-image", // Default: "gemini-2.5-flash-image"
      //   "defaultWidth": 1024, // Default: 1024
      //   "defaultHeight": 1024, // Default: 1024
      // },
      // Doubao provider for LLM and Vision
      // Uses Doubao API (compatible with OpenAI SDK)
      // "doubao": {
      //   "type": "doubao",
      //   "apiKey": "your_ark_api_key_here",
      //   "model": "doubao-seed-1-6-lite-251015",
      //   "baseURL": "https://ark.cn-beijing.volces.com/api/v3",
      //   "reasoningEffort": "medium", // Options: "low", "medium", "high"
      //   "temperature": 0.7,
      //   "maxTokens": 2000,
      //   "enableContext": true,
      //   "contextMessageCount": 10
      // },
      // Laozhang AI provider for text-to-image generation
      // Uses Laozhang AI API (Gemini API forwarder)
      // "laozhang": {
      //   "type": "laozhang",
      //   "apiKey": "your_laozhang_api_key_here",
      //   "model": "gemini-3-pro-image-preview", // Default: "gemini-3-pro-image-preview"
      //   "baseURL": "https://api.laozhang.ai", // Default: "https://api.laozhang.ai"
      //   "defaultAspectRatio": "16:9", // Options: "1:1", "16:9", "9:16", "4:3", "3:4", "21:9", "3:2", "2:3", "5:4", "4:5", default: "16:9"
      //   "defaultImageSize": "2K" // Options: "1K", "2K", "4K", default: "2K"
      // }
    }
  },
  // Context memory configuration (optional)
  // Controls how conversation history is stored and used
  "contextMemory": {
    // Maximum number of messages to store in memory buffer (default: 30)
    "maxBufferSize": 30,
    // Whether to use summary memory for long conversations (default: false)
    // Requires AI manager to be configured
    "useSummary": false,
    // Threshold for triggering summary when buffer exceeds this count (default: 20)
    "summaryThreshold": 20,
    // Maximum number of history messages to include in AI prompt (default: 10)
    // This limits the prompt length to prevent excessive token usage
    "maxHistoryMessages": 10
  },
  // Prompt templates configuration (required)
  // Directory path for prompt templates (relative to project root or absolute path)
  "prompts": {
    "directory": "prompts"
  },
  // TTS configuration (optional)
  // Fish Audio API configuration for text-to-speech
  "tts": {
    "apiKey": "your_fish_audio_api_key_here",
    "model": "s1",
    "format": "mp3"
  },
  // MCP configuration (optional)
  // MCP (Model Context Protocol) configuration for RAG search functionality
  "mcp": {
    "enabled": true,
    "searxng": {
      "url": "http://localhost:8080"
      // Optional: HTTP Basic Auth credentials
      // "authUsername": "user",
      // "authPassword": "pass",
      // Optional: Custom User-Agent header
      // "userAgent": "qqbot/1.0",
      // Optional: Proxy configuration
      // "proxy": {
      //   "http": "http://proxy:8080",
      //   "https": "http://proxy:8080"
      // }
    },
    "server": {
      "enabled": false, // false = direct API mode, true = MCP server mode
      "runtime": "bunx", // "bunx" | "npx" | "npm"
      "package": "mcp-searxng"
    },
    "search": {
      "enabled": true,
      "mode": "direct", // "direct" (SearXNG API) or "mcp" (MCP server)
      "autoTrigger": true, // Automatically trigger search when needed
      "triggerStrategy": "llm", // "llm" (use LLM to judge) | "keywords" | "none"
      "maxResults": 5, // Maximum number of search results
      "language": "all" // Default language for search results
    }
  }
}
